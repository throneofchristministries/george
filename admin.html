<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Throne of Christ Ministries Admin</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{font-family:Arial;background:#f0f2f5;padding:20px}
h2{text-align:center}
input,textarea,button{width:100%;padding:10px;margin:6px 0;border-radius:5px;border:1px solid #ccc}
button{background:#0a2e5d;color:gold;font-weight:bold}
.tabs{display:flex;flex-wrap:wrap;gap:10px;margin:15px 0}
.tabs button{flex:1}
.section{display:none;background:white;padding:15px;border-radius:8px}
.section.active{display:block}
.item{border:1px solid #ccc;padding:8px;margin:8px 0;border-radius:5px;display:flex;justify-content:space-between}
</style>
</head>

<body>

<h2>Admin Panel</h2>

<div id="login">
<input id="pass" placeholder="Admin Password" type="password">
<button onclick="login()">Login</button>
</div>

<div id="panel" style="display:none">

<div class="tabs">
<button onclick="show('msg')">Messages</button>
<button onclick="show('prog')">Programs</button>
<button onclick="show('test')">Testimonials</button>
</div>

<div id="msg" class="section">

<h3>Add Message</h3>
<input id="mTitle" placeholder="Title">
<input id="mDate" type="date">
<input id="mVideo" placeholder="Video Embed">
<input id="mAudio" placeholder="Audio Link">
<button onclick="saveMsg()">Save</button>

<div id="msgList"></div>
</div>

<div id="prog" class="section">

<h3>Add Program</h3>
<input id="pTitle" placeholder="Title">
<input id="pDate" type="date">
<input id="pFlyer" placeholder="Flyer Image URL">
<button onclick="saveProg()">Save</button>

<div id="progList"></div>
</div>

<div id="test" class="section">

<h3>Add Testimonial</h3>
<input id="tName" placeholder="Name">
<textarea id="tMsg" placeholder="Message"></textarea>
<button onclick="saveTest()">Save</button>

<div id="testList"></div>
</div>

</div>

<script>
firebase.initializeApp({
apiKey: "AIzaSyBVkn_LvrbOFKmZLoJxMsrZXqugUQvml74",
authDomain: "throneofchristministries-6a88a.firebaseapp.com",
projectId: "throneofchristministries-6a88a"
});

const db=firebase.firestore();
const PASS="1234";

function login(){
if(pass.value===PASS){
login.style.display="none";
panel.style.display="block";
loadAll();
}else alert("Wrong password");
}

function show(id){
document.querySelectorAll('.section').forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function saveMsg(){
db.collection("messages").add({
title:mTitle.value,
date:mDate.value,
video:mVideo.value,
audio:mAudio.value
}).then(loadMsgs);
}

function loadMsgs(){
msgList.innerHTML="";
db.collection("messages").orderBy("date","desc").get().then(s=>{
s.forEach(d=>{
msgList.innerHTML+=`<div class=item>${d.data().title}<button onclick="del('messages','${d.id}')">X</button></div>`;
});
});
}

function saveProg(){
db.collection("programs").add({
title:pTitle.value,
date:pDate.value,
flyer:pFlyer.value
}).then(loadProg);
}

function loadProg(){
progList.innerHTML="";
db.collection("programs").get().then(s=>{
s.forEach(d=>{
progList.innerHTML+=`<div class=item>${d.data().title}<button onclick="del('programs','${d.id}')">X</button></div>`;
});
});
}

function saveTest(){
db.collection("testimonials").add({
name:tName.value,
message:tMsg.value
}).then(loadTest);
}

function loadTest(){
testList.innerHTML="";
db.collection("testimonials").get().then(s=>{
s.forEach(d=>{
testList.innerHTML+=`<div class=item>${d.data().name}<button onclick="del('testimonials','${d.id}')">X</button></div>`;
});
});
}

function del(c,id){
db.collection(c).doc(id).delete().then(loadAll);
}

function loadAll(){
loadMsgs();loadProg();loadTest();
}
</script>

</body>
</html>
